        function handleOrder(e) {
            e.preventDefault();
            if(cart.length === 0) { alert('ุงูุฑุฌุงุก ุฅุถุงูุฉ ููุชุฌ ูุงุญุฏ ุนูู ุงูุฃูู'); return; }

            const paymentType = document.querySelector('input[name="payment"]:checked').value;
            const firstName = document.getElementById('firstName').value;
            const lastName = document.getElementById('lastName').value;
            const phone = document.getElementById('phone').value;

            let productList = "";
            cart.forEach((item, i) => { productList += `๐น ${item.name} (${item.price} ุฑูุงู)\n`; });

            // ุฅุฐุง ุงุฎุชุงุฑ ุงูุนููู ุฏูุน ุฃูููุงูู
            if (paymentType === "ุฏูุน ุฃูููุงูู") {
                // ููุง ูููู ุจุฅุธูุงุฑ ุชูุจูู ุฃู ุชูุฌููู ูุตูุญุฉ ุฏูุน ุญููููุฉ
                // ุณุฃููู ุจุชูุฌููู ูููุงุชุณุงุจ ูุน ูุต ููุถุญ ุฃูู ูุฑูุฏ ุงูุฏูุน ุฅููุชุฑูููุงู ูุชุฑุณู ูู ุจูุงูุงุช ุญุณุงุจู
                const onlineMessage = `*ุทูุจ ุฏูุน ุฃูููุงูู* ๐ณ\n\n` +
                                    `๐ค ุงูุนููู: ${firstName} ${lastName}\n` +
                                    `๐ฐ ุงููุจูุบ ุงููุทููุจ: ${total} ุฑูุงู\n` +
                                    `ูุฑุฌู ุชุฒููุฏู ุจุฑูู ุงูุญุณุงุจ ุฃู ุงูุฑุงุจุท ูุฅุชูุงู ุงูุฏูุน ุนุจุฑ ุงูุฌูุงู.`;
                
                const encodedOnline = encodeURIComponent(onlineMessage);
                alert("ุณูุชู ุชูุฌููู ูููุงุชุณุงุจ ูุชููู ุชูุงุตูู ุงูุญุณุงุจ ุงูุจููู/ุงููุญูุธุฉ ูุฅุชูุงู ุงูุฏูุน.");
                window.open(`https://wa.me/967779605053?text=${encodedOnline}`, '_blank');
                return;
            }

            // ุฅุฐุง ุงุฎุชุงุฑ ูุงุด (ุงูุฑุณุงูุฉ ุงูุนุงุฏูุฉ)
            const message = `*ุทูุจ ุฌุฏูุฏ (ูุงุด ุนูุฏ ุงูุงุณุชูุงู)* ๐\n\n` +
                          `๐ค *ุงูุนููู:* ${firstName} ${lastName}\n` +
                          `๐ *ุงูุฌูุงู:* ${phone}\n` +
                          `โโโโโโโโโโโโโโโ\n` +
                          `๐ *ุงูููุชุฌุงุช:*\n${productList}\n` +
                          `โโโโโโโโโโโโโโโ\n` +
                          `๐ฐ *ุงูุฅุฌูุงูู:* ${total} ุฑูุงู\n`;

            const encodedMessage = encodeURIComponent(message);
            window.open(`https://wa.me/967779605053?text=${encodedMessage}`, '_blank');
        }
